(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{171:function(e,t,n){e.exports=n(339)},176:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),l=n.n(o),c=(n(176),n(177),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(29),s=n(40),m=n(83),p=n(88),d=n(41),g=n.n(d),f=n(84),h=n(85),E=n(93),v=n(86),b=n(94),y=n(87),w=n.n(y),x=Object({NODE_ENV:"production",PUBLIC_URL:""}).BACKEND,j=w.a.create({baseURL:x,withCredentials:!0}),C={signup:function(e){return j.post("/signup",e)},login:function(e){return j.post("/login",e)},getUser:function(){return j.get("/profile")},logout:function(){return j.get("/logout")}},S=n(95),I=n.n(S),k=w.a.create({baseURL:"process.env.BACKEND/edificios",withCredentials:!0}),U={getbuildings:function(){return k.get("/")},getUser:function(e){return e.post("/myUsers",e)},allUsers:function(e){return e.post("/allUsers",e)},logout:function(){return k.get("/logout")}},N=Object(a.createContext)(),L=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={loggedUser:!1,formSignup:{name:"",email:"",password:""},loginForm:{email:"",password:""},user:{},projects:[]},n.handleInput=function(e,t){var a=n.state[t];a[e.target.name]=e.target.value,n.setState({obj:a})},n.handleSignup=function(e){var t,a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,g.a.awrap(C.signup(n.state.formSignup));case 3:t=r.sent,a=t.data,I.a.fire("Welcome ".concat(a.user.name),"User created","success");case 6:case"end":return r.stop()}}))},n.handleLogin=function(e,t){e.preventDefault(),C.login(n.state.loginForm).then((function(e){var a=e.data;n.setState({loggedUser:!0,user:a.user}),t()})).catch((function(e){I.a.fire("Datos Incorrectos","error")}))},n.handleLogout=function(e){return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(C.logout());case 2:window.localStorage.clear(),n.setState({loggedUser:!1,user:{}}),e();case 5:case"end":return t.stop()}}))},n.handlegetprojects=function(){var e,t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(U.getbuildings());case 2:return e=a.sent,t=e.data,n.setState({projects:t.allBuildings}),a.abrupt("return",t);case 6:case"end":return a.stop()}}))},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:document.cookie&&C.getUser().then((function(t){var n=t.data;e.setState({loggedUser:!0,user:n.user}),I.a.fire("Welcome back ".concat(n.user.name," "),"","success")})).catch((function(e){return console.log(e)})),this.handlegetprojects();case 2:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return r.a.createElement(N.Provider,{value:{handlegetprojects:this.handlegetprojects,loggedUser:this.state.loggedUser,formSignup:this.state.formSignup,loginForm:this.state.loginForm,handleInput:this.handleInput,handleSignup:this.handleSignup,handleLogin:this.handleLogin,handleLogout:this.handleLogout,user:{},projects:[]}},this.props.children)}}]),t}(a.Component);function O(){var e=Object(m.a)(["\n  width: 100vw;\n  height: 7vh;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 10px;\n  box-sizing: border-box;\n  & a {\n    padding: 5px;\n    color: black\n    text-decoration: none;\n  }\n  & a.navbar-active {\n    color: #0f4c81;\n  }\n"]);return O=function(){return e},e}var F=p.a.nav(O());var P=Object(s.f)((function(e){return console.log(e),r.a.createElement(N.Consumer,null,(function(t){return r.a.createElement(F,null,r.a.createElement(u.c,{exact:!0,to:"/",activeClassName:"navbar-active"},"Home"),r.a.createElement(u.c,{exact:!0,to:"/signup",activeClassName:"navbar-active"},"Signup"),!t.loggedUser&&r.a.createElement(u.c,{exact:!0,to:"/login",activeClassName:"navbar-active"},"Login"),t.loggedUser&&r.a.createElement("span",{onClick:function(){return t.handleLogout((function(){e.history.push("/login")}))}},"Logout"))}))})),D=n(342),T=n(343),A=n(11),W=n(126);function R(e){return r.a.createElement(N.Consumer,null,(function(t){return r.a.createElement(D.a,{onSubmit:function(n){t.handleSignup(n),e.history.push("/login")}},r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"name",prefix:r.a.createElement(A.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Nombre Completo",type:"text",value:t.formSignup.name,onChange:function(e){return t.handleInput(e,"formSignup")}})),r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"address",prefix:r.a.createElement(A.a,{type:"address",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Direccion",type:"text",value:t.formSignup.address,onChange:function(e){return t.handleInput(e,"formSignup")}})),r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"phone",prefix:r.a.createElement(A.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Tel\xe9fono",type:"text",value:t.formSignup.phone,onChange:function(e){return t.handleInput(e,"formSignup")}})),r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"clave_edificio",prefix:r.a.createElement(A.a,{type:"clave_edificio",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Clave",type:"text",value:t.formSignup.clave_edificio,onChange:function(e){return t.handleInput(e,"formSignup")}})),r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"email",prefix:r.a.createElement(A.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",type:"email",value:t.formSignup.email,onChange:function(e){return t.handleInput(e,"formSignup")}})),r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"password",type:"password",prefix:r.a.createElement(A.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password",value:t.formSignup.password,onChange:function(e){return t.handleInput(e,"formSignup")}})),r.a.createElement(D.a.Item,null,r.a.createElement(W.a,{type:"primary",htmlType:"submit"},"Signup")))}))}var M=function(e){function t(){return Object(f.a)(this,t),Object(E.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){if(console.log(this.context),this.context.loggedUser)return console.log(";lol"),this.props.history.push("/profile")}},{key:"render",value:function(){var e=this;return r.a.createElement(N.Consumer,null,(function(t){return r.a.createElement(D.a,{onSubmit:function(n){t.handleLogin(n,(function(){e.props.history.push("/profile")}))}},r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"email",prefix:r.a.createElement(A.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",type:"email",value:t.loginForm.email,onChange:function(e){return t.handleInput(e,"loginForm")}})),r.a.createElement(D.a.Item,null,r.a.createElement(T.a,{name:"password",type:"password",prefix:r.a.createElement(A.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password",value:t.loginForm.password,onChange:function(e){return t.handleInput(e,"loginForm")}})),r.a.createElement(D.a.Item,null,r.a.createElement(W.a,{type:"primary",htmlType:"submit"},"Login")))}))}}]),t}(r.a.Component);M.contextType=N;n(58);var _=n(341),B=_.a.Meta;function z(e){return r.a.createElement(N.Consumer,null,(function(e){return r.a.createElement("div",{className:"col"},r.a.createElement("h1",null,"Usuario"),r.a.createElement(_.a,{hoverable:!0,style:{width:240}},r.a.createElement(B,{title:e.user.name,description:e.user.email}),r.a.createElement("div",{className:"boton-crear"},r.a.createElement(u.b,{to:"/createProject"},r.a.createElement("button",{type:"submit",className:"btn btn-primary "},"Crear un edificio")))),r.a.createElement(_.a,{hoverable:!0,style:{width:240}},r.a.createElement(B,{title:e.user.name,description:e.user.email}),r.a.createElement("div",{className:"boton-crear"},r.a.createElement(u.b,{to:"/createProject"},r.a.createElement("button",{type:"submit",className:"btn btn-primary "},"Registrar un Pago")))))}))}var J=_.a.Meta;function K(e){return r.a.createElement(N.Consumer,null,(function(e){return r.a.createElement("div",{className:"form"},console.log("mi context project"+e.handlegetprojects),r.a.createElement("h1",null,"Mis Edificios"),e.projects.map((function(e,t){return r.a.createElement(_.a,{hoverable:!0,style:{width:240}},r.a.createElement(J,{title:e.name,description:e.direccion,key:t}))})))}))}function q(e){return r.a.createElement(N.Consumer,null,(function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(z,null),r.a.createElement("div",{className:"col"},r.a.createElement(K,null)),r.a.createElement("div",{className:"col"})))}))}function H(){var e=Object(m.a)(['\ndiv{\n   background-image: url("/main-bg001.jpg");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 100vh;\n  font-size: 50px;\n  margin: 0;\n  padding: 0;\n  height:500px;\n  width:100vw;\n}\n  h1{\n    height: 40px;\n    color: blue;\n    text-align: center;\n    padding: 1% 1% 1% 1%;\n    margin: 0;\n    font-weight: bolder;\n  }\n  img{\n    width: 100px;\n  }\n']);return H=function(){return e},e}var V=p.a.div(H());var $=function(){return r.a.createElement("div",null,r.a.createElement(V,null,r.a.createElement("h1",null,"AEDIFICIUM LTS"),r.a.createElement("div",null)))},G=n(344),Q=T.a.TextArea;G.a.Option;function X(e){return r.a.createElement(N.Consumer,null,(function(t){return r.a.createElement("div",{className:"form"},r.a.createElement(D.a,{onSubmit:function(n){t.handleProject(n),e.history.push("/profile")}},r.a.createElement(D.a.Item,null,r.a.createElement("label",{for:"exampleFormControlTextarea1"},"Nombre del Edificio"),r.a.createElement(T.a,{name:"clave_edificio",placeholder:"clave del edificio",type:"text",value:t.projectForm.clave_edificio,onChange:function(e){return t.handleInput(e,"projectForm")}})),r.a.createElement(D.a.Item,null,r.a.createElement("label",{for:"exampleFormControlTextarea1"},"Direcci\xf3n"),r.a.createElement(Q,{rows:4,name:"direccion",value:t.projectForm.direccion,onChange:function(e){return t.handleInput(e,"projectForm")},required:!0})),r.a.createElement(D.a.Item,null,r.a.createElement(W.a,{type:"primary",htmlType:"submit"},"Crear"))))}))}var Y=_.a.Meta;function Z(e){return r.a.createElement(N.Consumer,null,(function(e){return r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Edificios Existentes"),e.allProjects.map((function(e,t){return r.a.createElement(_.a,{hoverable:!0,style:{width:240},cover:r.a.createElement("img",{alt:"photoProfile",src:e.photoURL,key:t})},r.a.createElement(Y,{title:e.title,description:e.description,key:t}))})))}))}var ee=function(){return r.a.createElement(u.a,null,r.a.createElement(P,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:$}),r.a.createElement(s.a,{exact:!0,path:"/signup",component:R}),r.a.createElement(s.a,{exact:!0,path:"/login",component:M}),r.a.createElement(s.a,{exact:!0,path:"/profile",component:q}),r.a.createElement(s.a,{exact:!0,path:"/createProject",component:X}),r.a.createElement(s.a,{exact:!0,path:"/allProjects",component:Z})))};l.a.render(r.a.createElement(L,null,r.a.createElement(ee,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");c?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}()}},[[171,1,2]]]);
//# sourceMappingURL=main.9be8aca9.chunk.js.map